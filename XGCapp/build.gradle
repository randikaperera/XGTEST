/*
 * This file was generated by the Gradle 'init' task.
 */

dependencies {
    compile 'www.cellcard.com.kh.XGRegistry.resource:XG_GetAutoSubscription:1.0.0'
    compile 'www.cellcard.com.kh.XGRegistry.resource:XG_GetNotificationSeq:1.0.0'
    compile 'www.cellcard.com.kh.XGRegistry.resource:XG_MigrationPlanSeq:1.0.0'
    compile 'www.cellcard.com.kh.XGRegistry.resource:XG_NotificationConfig:1.0.0'
    compile 'www.cellcard.com.kh.XGRegistry.resource:XG_Config:1.0.0'
    compile 'www.cellcard.com.kh.XGRegistry.resource:XG_RespondSeq:1.0.0'
    compile 'www.cellcard.com.kh.XGRegistry.resource:XG_OFFSubscriptionSeq:1.0.0'
    compile 'www.cellcard.com.kh.XGRegistry.resource:XG_SubscribeSeq:1.0.0'
    compile 'www.cellcard.com.kh.XGConfig.sequence:XG_HandlerSeq:1.0.0'
}

group = 'www.cellcard.com.kh.XGCapp'
description = 'XGCapp'

task deployLocal(type:Exec) {
	commandLine 'mvn', 'org.wso2.maven:maven-car-deploy-plugin:deploy-car', '-Pdeploy-local', "-s../settings.xml"
}

task deployRemote(type:Exec) {
    def username = System.getenv('USERNAME');
    def password = System.getenv('PASSWORD');
    def eiServer = System.getenv('EI_SERVER_HOST');
	def command =['mvn', 'org.wso2.maven:maven-car-deploy-plugin:deploy-car', '-Pdeploy-remote', "-s../settings.xml", "-Desb-server-username="+username, "-Desb-server-password="+password, "-Desb-server-url="+eiServer]
    commandLine command
}

task deployToArtifactory(type:Exec) {
    def username = System.getenv('JFROG_USERNAME');
    def password = System.getenv('JFROG_PASSWORD');
    def artifactoryUrl = System.getenv('ARTIFACTORY_URL');
	def command = [ 'mvn',  'deploy', '-Pdeploy-artifactory', "-s../settings.xml" ,"-Dartifactory-username="+username, "-Dartifactory-password="+password, "-Dartifactory-url="+artifactoryUrl]
    commandLine command
}

task releaseVersion(type:Exec){
	def env = System.getenv();
	def username = System.getenv('GIT_USERNAME');
	def password = System.getenv('GIT_PASSWORD');
	commandLine 'mvn', 'release:prepare', 'release:perform'
}
